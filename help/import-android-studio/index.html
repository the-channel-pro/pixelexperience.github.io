<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
    <meta name="description" content="How to import the sources to Android Studio / IntelliJ - PixelExperience Wiki">
    <meta property="og:title" content="How to import the sources to Android Studio / IntelliJ - PixelExperience Wiki">
    <meta property="og:description" content="How to import the sources to Android Studio / IntelliJ - PixelExperience Wiki">
    <meta property="og:site_name" content="How to import the sources to Android Studio / IntelliJ - PixelExperience Wiki">
    <meta property="og:image" content="https://download.pixelexperience.org/images/banner.png" />
    <meta name="keywords" content="wiki,wiki pe,pixel experience,pixel,experience,oreo,google,google pixel,android 10,android q,pie,aosp,ten,android,custom rom,rom">
    <meta name="msapplication-TileColor" content="#2D2D2D">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#2D2D2D">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">

    <title>How to import the sources to Android Studio / IntelliJ - PixelExperience Wiki</title>

    <link href="/assets/css/material-kit.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Product+Sans:350,400,500,700|Material+Icons" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="/assets/js/main.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>


  </head>
  <body>

    <nav class="navbar fixed-top navbar-expand-lg bg-white mb-0 rounded-0">
  <div class="container">
    <div class="navbar-translate">
      <a class="navbar-brand font-weight-bold" href="/"><img src="/images/logo.png" alt="PixelExperience"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="navbar-toggler-icon"></span>
        <span class="navbar-toggler-icon"></span>
        <span class="navbar-toggler-icon"></span>
      </button>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="/devices/" class="nav-link">Devices</a>
          </li>
          <li class="nav-item">
            <a href="/help/contributing/" class="nav-link">Contribute</a>
          </li>
          <li class="nav-item">
            <a href="/help/developer-information/" class="nav-link">Maintainers</a>
          </li>
          <li class="nav-item">
            <a href="https://download.pixelexperience.org" class="nav-link">
              <i class="material-icons">open_in_new</i>
              Website
            </a>
          </li>
        </ul>

        <form class="form-inline ml-auto" autocomplete="off">
          <div class="form-group no-border">
            <i class="material-icons">search</i>
            <input id="search-input" type="text" class="form-control" placeholder="Search">
          </div>

          <ul id="results-container"></ul>


          <script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
          <script type="text/javascript">
              SimpleJekyllSearch.init({
                  searchInput: document.getElementById('search-input'),
                  resultsContainer: document.getElementById('results-container'),
                  dataSource: '/search.json',
                  searchResultTemplate: '<li><a href="{url}" title="How to import the sources to Android Studio / IntelliJ">{title}</a></li>',
                  noResultsText: '<li><a href="#">No results found.</a></li>',
                  limit: 10,
                  fuzzy: true,
              })
          </script>
        </form>

      </div>
    </div>
  </nav>


    <div class="main-content">

      <div class="container page">

  <h1>How to import the sources to Android Studio / IntelliJ</h1>

  
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>
<h2 id="install-android-studio">Install Android Studio</h2>

<p>Go to the <a href="https://developer.android.com/studio/index.html#downloads">Download page</a> and download the package for your OS.</p>

<p>Unpack the downloaded file to a destination of your choice, then follow the instructions described in <code class="highlighter-rouge">Install-Linux-tar.txt</code> file which is in the extracted folder.</p>

<h2 id="prepare-a-project-file">Prepare a project file</h2>

<p>Open a shell and navigate to the root folder of your Android sources, e.g. <code class="highlighter-rouge">~/android/pe</code>.
In case environment functions and variables are not yet loaded, type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source build/envsetup.sh
</code></pre></div></div>

<div class="alert alert-success" role="alert"><div class="alert-icon"><i class="material-icons">check</i></div><div class="alert-text"><b>Tip:</b> You can always check this by executing <code class="highlighter-rouge">croot</code> (go to your Android root dir) and see if it gives an error. If not, you have already executed the <code class="highlighter-rouge">source</code> command.</div></div>

<p>Now execute:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make idegen &amp;&amp; development/tools/idegen/idegen.sh
</code></pre></div></div>

<div class="alert alert-info" role="alert"><div class="alert-icon"><i class="material-icons">info_outline</i></div><div class="alert-text"><b>Note:</b> This can take some time while it goes through your tree and generates an Android Studio project based on it.</div></div>

<p>In case you are developing on multiple branches or plan to do so (otherwise skip the next step), do the following (replace every occurrence of <code class="highlighter-rouge">pixelexperience</code> with your desired naming scheme):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv android.ipr pixelexperience.ipr
mv android.iml pixelexperience.iml &amp;&amp; ln -s pixelexperience.iml android.iml
</code></pre></div></div>

<h2 id="prepare-android-studio">Prepare Android Studio</h2>

<p>Android Studio struggles to parse the huge PixelExperience / Android sources and requires some different settings than the defaults. Therefore, before starting actual development, it is necessary to change some of those.</p>

<h3 id="configure-memory">Configure memory</h3>

<p>Open Android Studio and click on <strong>Configure</strong>.</p>

<p>Then click on “Edit Custom VM Options” and include the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-Xms748m
-Xmx748m
</code></pre></div></div>

<p>This will set the initial allocated (<code class="highlighter-rouge">Xms</code> parameter) and maximum usable (<code class="highlighter-rouge">Xmx</code> parameter) RAM to 748MB each. You can also use higher numbers but should not go below that to ensure usablility. You can find more information of <a href="https://developer.android.com/studio/intro/studio-config.html#adjusting_heap_size">these</a> and other parameters in the <a href="https://developer.android.com/studio/intro/studio-config.html">official documentation</a></p>

<h3 id="increase-the-file-parsing-limit">Increase the file parsing limit</h3>

<p>Again, click on <strong>Configure</strong> and then click on “Edit Custom Properties” and put <code class="highlighter-rouge">idea.max.intellisense.filesize=5000</code> there (you can change its value to something higher than 5000, if you wish)</p>

<p>This is required so Android Studio can parse very large files to properly provide the auto-complete features (Android Studio calls this <code class="highlighter-rouge">IntelliSense</code>).</p>

<div class="alert alert-info" role="alert"><div class="alert-icon"><i class="material-icons">info_outline</i></div><div class="alert-text"><b>Note:</b> If the line is missing (it should already be inside the file with current Android Studio versions), append it to the end of the file.</div></div>

<h2 id="start-working-with-android-studio">Start working with Android Studio</h2>

<p>Reopen Android Studio and click on <strong>Open existing project</strong>.</p>

<p>Then navigate to your Android source directory and open the <code class="highlighter-rouge">.ipr</code> file.</p>

<div class="alert alert-info" role="alert"><div class="alert-icon"><i class="material-icons">info_outline</i></div><div class="alert-text"><b>Note:</b> Opening the project the first time or after a fresh sync can take a while. You should wait until any indexing of files is done to be sure that every IDE feature is ready to use.</div></div>

<h3 id="configure-the-project">Configure the project</h3>

<p>After opening the project, navigate to <strong>File -&gt; Project Structure -&gt; SDKs</strong> (this might be disabled until the indexing has finished) and set up a JDK where you remove <em>all</em> libraries (<code class="highlighter-rouge">.jar</code> files).</p>

<p>Then, on the left side of the settings panel, choose <strong>Project Settings -&gt; Modules</strong> and mark the folder <code class="highlighter-rouge">out/target/common/R</code> as <code class="highlighter-rouge">Sources</code> (you can also select it and press [ALT]+[S]).</p>

<p>Press <strong>Apply</strong> and close the settings.</p>

<h3 id="start-developing">Start developing</h3>

<p>Now, after all the previous steps are done, you can actually start developing and exploring the sources. The <code class="highlighter-rouge">Find in path</code> function (<strong>Edit -&gt; Find -&gt; Find in path</strong>) can be a good start to find a file you want to modify. Just search for a known string among all source files and then dive in deeper until you actually found the function you want to modify.</p>

<h3 id="contribute">Contribute!</h3>

<p>After you have modified the sources and tested your change, you can contribute to PixelExperience by <a href="/help/submit-patch/">submitting your work</a>.</p>



</div>


    </div>

    <footer class="footer mt-5 px-2 py-4 ">
  <div class="container">
    <div class="row">
      <div class="col-md text-center text-md-left">
        <p class="text-muted my-0"><b>&copy; 2018 - 2020 The PixelExperience Project</b></p>
      </div>
      <div class="col-md">
        <p class="text-center text-md-right text-muted">Licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>.<br />
         Site last generated: Aug 18, 2020</p>
      </div>
    </div>
  </div>
</footer>


    <script>anchors.add().remove('h1');</script>

  </body>
</html>
