<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
    <meta name="description" content="How to use Gerrit - PixelExperience Wiki">
    <meta property="og:title" content="How to use Gerrit - PixelExperience Wiki">
    <meta property="og:description" content="How to use Gerrit - PixelExperience Wiki">
    <meta property="og:site_name" content="How to use Gerrit - PixelExperience Wiki">
    <meta property="og:image" content="https://download.pixelexperience.org/images/banner.png" />
    <meta name="keywords" content="wiki,wiki pe,pixel experience,pixel,experience,oreo,google,google pixel,android 10,android q,pie,aosp,ten,android,custom rom,rom">
    <meta name="msapplication-TileColor" content="#2D2D2D">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#2D2D2D">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">

    <title>How to use Gerrit - PixelExperience Wiki</title>

    <link href="/assets/css/material-kit.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Product+Sans:350,400,500,700|Material+Icons" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="/assets/js/main.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js" integrity="sha256-WofcoLT8gToeaSmVRe28qpnlFxdBJH1n4K6Bk3YowvU=" crossorigin="anonymous"></script>


  </head>
  <body>

    <nav class="navbar fixed-top navbar-expand-lg bg-white mb-0 rounded-0">
  <div class="container">
    <div class="navbar-translate">
      <a class="navbar-brand font-weight-bold" href="/"><img src="/images/logo.png" alt="PixelExperience"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="navbar-toggler-icon"></span>
        <span class="navbar-toggler-icon"></span>
        <span class="navbar-toggler-icon"></span>
      </button>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="/devices/" class="nav-link">Devices</a>
          </li>
          <li class="nav-item">
            <a href="/help/contributing/" class="nav-link">Contribute</a>
          </li>
          <li class="nav-item">
            <a href="/help/developer-information/" class="nav-link">Maintainers</a>
          </li>
          <li class="nav-item">
            <a href="https://download.pixelexperience.org" class="nav-link">
              <i class="material-icons">open_in_new</i>
              Website
            </a>
          </li>
        </ul>

        <form class="form-inline ml-auto" autocomplete="off">
          <div class="form-group no-border">
            <i class="material-icons">search</i>
            <input id="search-input" type="text" class="form-control" placeholder="Search">
          </div>

          <ul id="results-container"></ul>


          <script src="/assets/js/jekyll-search.js" type="text/javascript"></script>
          <script type="text/javascript">
              SimpleJekyllSearch.init({
                  searchInput: document.getElementById('search-input'),
                  resultsContainer: document.getElementById('results-container'),
                  dataSource: '/search.json',
                  searchResultTemplate: '<li><a href="{url}" title="How to use Gerrit">{title}</a></li>',
                  noResultsText: '<li><a href="#">No results found.</a></li>',
                  limit: 10,
                  fuzzy: true,
              })
          </script>
        </form>

      </div>
    </div>
  </nav>


    <div class="main-content">

      <div class="container page">

  <h1>How to use Gerrit</h1>

  
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>
<h2 id="what-is-gerrit">What is Gerrit?</h2>

<p><a href="https://code.google.com/p/gerrit/">Gerrit</a> is a source code review system developed by Google for use with Android (though it can be applied to any type of project). You must use Gerrit to submit code changes, in case you find an error in the source code, you want to contribute with good new features or even if you believe you have a better way of implementing a certain feature.</p>

<p>Check out PixelExperience’s review system - <a href="https://gerrit.pixelexperience.org">Gerrit</a>.</p>

<p>There you can see what has been recently merged into the codebase. More interestingly, you can see what people have been submitting for review. If there’s something you want to try, you can actually test it by merging it into your code and building. It’s a simple matter.</p>

<h2 id="reviewing-a-patch">Reviewing a patch</h2>

<p>A review system is defined by the ability to approve or disapprove changes and to verify them before they become part of the codebase. There are several possible ways to interact with the system, some are limited to specific users.
Anyone with an account can reply to a patch and add a label:</p>

<table class="table">
  <thead>
    <tr>
      <th>Label</th>
      <th>Definition</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>-2</strong></td>
      <td>Do not submit</td>
      <td>This patch can’t be submitted without the removal of the vote</td>
    </tr>
    <tr>
      <td><strong>-1</strong></td>
      <td>I would prefer that you didn’t submit this</td>
      <td>The code or the idea doesn’t match the project’s standards</td>
    </tr>
    <tr>
      <td><strong>0</strong></td>
      <td>No score</td>
      <td>I just have some generic info I’d like to share via the reply message</td>
    </tr>
    <tr>
      <td><strong>+1</strong></td>
      <td>Looks good to me, but someone else must approve</td>
      <td>The code and idea meets the standards of the project</td>
    </tr>
    <tr>
      <td><strong>+2</strong></td>
      <td>Looks good to me, approved</td>
      <td>After verification of the content this patch can be submitted</td>
    </tr>
  </tbody>
</table>

<p>The labels <strong>+2</strong> and <strong>-2</strong> are limited to the maintainers of the project or of the device a patch is meant for.</p>

<p>A patch can be submitted after verification (“does it build? does it still boot? does it not break anything?”) which has its own labels (-1 / 0 / +1) and is then part of the code used for builds.</p>

<div class="alert alert-warning" role="alert"><div class="alert-icon"><i class="material-icons">warning</i></div><div class="alert-text"><b>Important:</b> The several possible votes are <strong>not</strong> meant to be used as a ‘Facebook-Like’. Giving a <strong>+1</strong> means you have read the commit message and the content of the patch and made sure they meet the project’s standards in terms of coding, ideas and policies.<br />
The possibility of adding a comment doesn’t mean you should add your opinion on patches randomly.</div></div>

<h2 id="testing-a-patch">Testing a patch</h2>

<h3 id="preparing-the-build-environment">Preparing the build environment</h3>

<p>Go to the root of the source code:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/android/pe
</code></pre></div></div>

<p>Setup your build environment:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source build/envsetup.sh
</code></pre></div></div>

<p>The rest of this guide will rely on this being done. You can check the proper execution of the commands by typing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>croot
</code></pre></div></div>

<p>Your shell will then navigate to the root of the sources, <code class="highlighter-rouge">~/android/pe</code> or give an error.</p>

<h3 id="retrieving-an-existing-commit">Retrieving an existing commit</h3>

<p>Let’s take a <a href="https://gerrit.pixelexperience.org/#/c/3221/">example commit</a>.</p>

<p>To add this patch to your local build source code, you can use the <code class="highlighter-rouge">repopick</code> command:</p>

<p>If you type <code class="highlighter-rouge">repopick -h</code> you’ll get a list of supported commands, such as the ability to pick multiple patches or ranges of patches in a single command.</p>

<p>Start by noting down the URL of the proposed commit. In the above example, it’s <a href="https://gerrit.pixelexperience.org/#/c/3221/">https://gerrit.pixelexperience.org/#/c/3221/</a>. That number, <code class="highlighter-rouge">3221</code> will come in handy in a second.</p>

<p>The patch should be applied automatically after typing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repopick 3221
</code></pre></div></div>

<p>Go ahead and build. When you’re done, you’ll hopefully have the feature you wanted. If it worked alright, go sign up for Gerrit and give a +1 vote to the proposed contribution.</p>

<h2 id="submitting-a-patch">Submitting a patch</h2>

<p>You can of course also contribute by submitting your own patch via Gerrit. Follow <a href="/help/submit-patch/">this link</a> to find out how to do it!</p>

<h2 id="common-commands">Common commands</h2>

<p>See <a href="http://gitimmersion.com/">Git Immersion</a> for more information.</p>

<h3 id="repo"><code class="highlighter-rouge">repo</code></h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">repo abandon &lt;branch name&gt;</code> to abandon any changes (commits) that have not been uploaded.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">repo start &lt;branch&gt; &lt;project&gt;</code> to start repo listening for changes through git.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">repo upload &lt;project name&gt;</code> to upload committed changes to the remote review server.</p>
  </li>
</ul>

<h3 id="git"><code class="highlighter-rouge">git</code></h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">git add &lt;file name&gt;</code> to stage a file that has been changed or added.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git commit -m "comment"</code> to commit a change.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git reset HEAD &lt;file name&gt;</code> to unstage a file.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git revert HEAD</code> to undo the last commit.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git status</code> to see the status of a project.</p>
  </li>
</ul>

<h2 id="resources">Resources</h2>

<p><a href="http://gitimmersion.com/">Git Immersion</a></p>

<p><a href="https://source.android.com/source/developing">Git and repo overview</a></p>

<p><a href="https://gerrit.pixelexperience.org/Documentation/index.html">Gerrit Documentation</a></p>


</div>


    </div>

    <footer class="footer mt-5 px-2 py-4 ">
  <div class="container">
    <div class="row">
      <div class="col-md text-center text-md-left">
        <p class="text-muted my-0"><b>&copy; 2018 - 2020 The PixelExperience Project</b></p>
      </div>
      <div class="col-md">
        <p class="text-center text-md-right text-muted">Licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>.<br />
         Site last generated: Aug 18, 2020</p>
      </div>
    </div>
  </div>
</footer>


    <script>anchors.add().remove('h1');</script>

  </body>
</html>
